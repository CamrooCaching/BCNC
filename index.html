<!DOCTYPE html>
<html>
<head>
    <title>Big Creek Night Cache -- GCXXXX</title>
    <style>
        /* Style for the header text */
        h1 {
            font-size: 2.5rem; /* Increase font size for better visibility */
            margin-bottom: 10px; /* Add some margin below the header */
            text-align: center; /* Center-align the text */
        }

        /* Additional styling for mobile friendliness */
        body {
            font-family: Arial, sans-serif; /* Set a clean, readable font */
            font-size: 2.0rem; /* Font size */
            margin: 0; /* Remove default margins */
            padding: 0; /* Remove default padding */
            text-align: center; /* Center-align the text */
        }

        /* Style for the UTC time display */
        #utc-time {
            font-size: 1.5rem; /* Font size for the UTC time */
            text-align: center; /* Center-align the time */
        }
    </style>
</head>
<body>
    <h1>Big Creek Night Cache</h1>
    <div>You must wait until the moon has risen to proceed with this cache! (9pm-6am)</div>
    <div>This page refreshes every 8 seconds. Please wait for further instruction.</div>
    <div>  </div>
    <div>  </div>
    <div> For an optimal experience, turn up your brightness and volume!</div>

    <script>
        // TimeZoneDB API key
        const apiKey = 'VDNUG4C7XEEG';

        // API endpoint for TimeZoneDB
        const apiURL = `https://api.timezonedb.com/v2.1/get-time-zone?key=${apiKey}&format=json&by=zone&zone=UTC`;

        // Base64-encoded redirect URL to https://camroocaching.github.io/BCNC/eyes.html
        const encodedRedirectURL = 'aHR0cHM6Ly9jYW1yb29jYWNoaW5nLmdpdGh1Yi5pby9CQ05DL2V5ZXMuaHRtbA==';

        // Function to fetch and update the live UTC time
        async function fetchUtcTime() {
            try {
                // Fetch the current UTC time from the online API
                const response = await fetch(apiURL);

                // Check if the response is successful
                if (!response.ok) {
                    throw new Error(`HTTP Error: ${response.status}`);
                }

                // Parse the JSON data
                const data = await response.json();

                // Extract the current UTC time as a float variable (seconds since epoch)
                const currentUtcTime = data.timestamp;

                // Check the specified range condition
                if (currentUtcTime > 1715216400 && currentUtcTime < 1715248800) {
                    // Decode the Base64-encoded redirect URL
                    const redirectURL = atob(encodedRedirectURL);

                    // Redirect the user
                    window.location.href = redirectURL;
                }

            } catch (error) {
                console.error('Error fetching UTC time:', error);
                document.getElementById('utc-time').innerText = 'Error fetching UTC time';
            }
        }

        // Fetch UTC time every second
        setInterval(fetchUtcTime, 8000);
    </script>
</body>
</html>
